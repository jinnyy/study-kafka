# Producer

주요 기능: 각각의 메시지를 토픽 파티션에 매핑하고 파티션의 리더에 요청을 보내는 것
* 키 값을 정해 해당 키를 가진 모든 메시지를 동일 파티션으로 전송 가능
* 키 값을 입력하지 않으면(default), round-robin 방식으로 파티션에 균등하게 분배

<br><br>

## 1. 콘솔 프로듀서
### 토픽 생성
> **참고**
>  `auto.create.topics.enable = true` → 메시지 전송시 해당 토픽이 없을 시 자동 생성

이제 토픽을 만들고 전송을 해보자.
카프카가 설치된 경로에서
```
$ ./bin/kafka-topics.sh --zookeeper <주키퍼 리스트> --topic <토픽 이름>\
 --partitions <숫자> --replication-factor <숫자> --create
```
출력
```
Created topic "<토픽 이름>"
```

생성된 토픽의 상세 내용을 확인하려면 다음과 같이 입력한다.
```
$ ./bin/kafka-topics.sh --zookeeper <주키퍼 리스트> --topic <토픽 이름> \
s--describe
```
#### 옵션
* `--zookeeper`  + 주키퍼 리스트
* `--topic`  + (확인하려는) 토픽 이름
* `--describe` 이것을 붙임으로써 상세 정보를 출력

 파티션, 파티션의 리더, 리플리케이션 팩터 등

<br>


### 전송
역시 카프카가 설치된 경로에서 다음과 같이 입력한다.
```
$ ./bin/kafka-console-producer.sh --broker-list <브로커 호스트명>:<포트번호>\ 
<브로커 호스트명2>:<포트번호> --topic <토픽 이름>
```
결과
```
>
```
위처럼 나오는 창에서 전송하고자하는 메시지를 입력하면 된다.

<br><br>

## 2. 클라이언트 프로그램을 이용한 프로듀서
클라이언트 프로그램(라이브러리)을 이용하면 Java, Python 등 언어를 이용해서 카프카 프로듀서를 만들 수 있다.

### 동기 전송
* 메시지를 전송한 후 리턴되는 Future 객체를 받아 전송이 성공했는지 실패했는지를 알 수 있음
* 응답을 기다리는 데 시간이 소요됨

### 비동기 전송
* 응답을 기다리지 않고 전송
* 빠른 전송 가능


<br><br><br>

### Reference
"카프카, 대용량 처리의 최강자", 고승범, 책만, 2018
